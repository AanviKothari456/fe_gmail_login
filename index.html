<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Saami - Voice Email Assistant</title>

  <!-- Base and UI styles (assuming they live next to index.html) -->
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="ui.css" />
</head>
<body>
  <h1>Saami - Your Voice Email Assistant</h1>

  <!-- LOGIN BUTTON -->
  <button id="loginBtn" onclick="login()">🔐 Login with Gmail</button>

  <!-- LOADING SCREEN (hidden by default) -->
  <div id="loading" class="loading-screen" style="display:none;">
    <p>🚀 Embarking on your hands-free journey…</p>
    <p>Fetching your inbox, please wait.</p>
  </div>

  <!-- MAIN CONTENT (hidden until logged in) -->
  <div id="content" style="display: none;">
    <h2>📥 Latest Email</h2>

    <p><strong>Subject:</strong> <span id="subject"></span></p>

    <!-- ─── BODY TOGGLE SECTION ─────────────────────────────────────────────── -->
    <div class="body-container">
      <div class="body-header">
        <!-- 
          When collapsed, we show ▶, when expanded ▼
          JavaScript will swap the classes “collapsed”/“expanded”
        -->
        <span id="body-toggle" class="collapsed">▶ Body</span>
      </div>
      <!-- The actual body; starts hidden -->
      <div id="body-content" class="collapsed-content"></div>
    </div>
    <!-- ───────────────────────────────────────────────────────────────────────── -->

    <!-- TWO‐LINE SUMMARY -->
    <h3>🔍 Two‐Line Summary:</h3>
    <p id="summary" style="font-style: italic; margin-bottom: 1rem;"></p>
    <button onclick="readSummary()">🔊 Read Summary Aloud</button>

    <button id="handsFreeBtn" onclick="handsFreeFlow()">Hands Free</button>

    <button id="extractBtn">📎 Extract Attachments</button>
    <p id="attachmentSummary" style="font-style: italic; margin-top: 0.5rem;"></p>


    <h3>🎤 Reply</h3>
    <button id="startBtn" onclick="startRecording()">Start Recording</button>
    <button id="stopBtn" onclick="stopRecording()">Stop Recording</button>
    <p id="transcript"></p>
    <button onclick="sendReply()">Generate AI Reply</button>

    <!-- EDITABLE AI REPLY AREA -->
    <h3>✍️ AI-Generated Reply (You can edit before sending)</h3>
    <textarea id="aiReplyEditable" rows="8" style="width: 100%; font-size: 1rem;"></textarea>
    <div style="margin-top: 0.5rem;">
      <button id="readBtn" onclick="readAndConfirmReply()">Read Reply Aloud & Ask to Send/Next</button>
    </div>
  </div>

  <!-- “All done” message (hidden until needed) -->
  <div id="doneMessage" style="display: none; font-size: 1.2rem; margin-top: 2rem;">
    ✅ All tasks done for today.
  </div>

  <script src="script.js"></script>
</body>
</html>
